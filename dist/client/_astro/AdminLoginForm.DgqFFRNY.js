import{j as i}from"./jsx-runtime.BBGWwODT.js";import{r as a}from"./index.DYwCuWnG.js";import{S as Q,P as Y}from"./index.D38prCEz.js";import{c as ee}from"./clsx.B-dksMZM.js";import{a as k,c as te,P as re,u as ne,b as B,d as O,e as oe,C as se}from"./index.Cs85si0U.js";import{s as S}from"./supabase.D-JsBXyn.js";import{c as D}from"./createLucideIcon.t37AtwoZ.js";import"./index.DSCYIl9i.js";import"./index.BWsCvz9k.js";import"./tslib.es6.eMSY344_.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=D("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=D("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),V=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,A=ee,L=(e,r)=>t=>{var s;if(r?.variants==null)return A(e,t?.class,t?.className);const{variants:o,defaultVariants:n}=r,l=Object.keys(o).map(u=>{const p=t?.[u],f=n?.[u];if(p===null)return null;const m=V(p)||V(f);return o[u][m]}),c=t&&Object.entries(t).reduce((u,p)=>{let[f,m]=p;return m===void 0||(u[f]=m),u},{}),d=r==null||(s=r.compoundVariants)===null||s===void 0?void 0:s.reduce((u,p)=>{let{class:f,className:m,...h}=p;return Object.entries(h).every(b=>{let[y,x]=b;return Array.isArray(x)?x.includes({...n,...c}[y]):{...n,...c}[y]===x})?[...u,f,m]:u},[]);return A(e,l,d,t?.class,t?.className)},ce=L("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),P=a.forwardRef(({className:e,variant:r,size:t,asChild:s=!1,...o},n)=>{const l=s?Q:"button";return i.jsx(l,{className:k(ce({variant:r,size:t,className:e})),ref:n,...o})});P.displayName="Button";const w=a.forwardRef(({className:e,type:r,...t},s)=>i.jsx("input",{type:r,className:k("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...t}));w.displayName="Input";function le(e,r=[]){let t=[];function s(n,l){const c=a.createContext(l),d=t.length;t=[...t,l];const u=f=>{const{scope:m,children:h,...b}=f,y=m?.[e]?.[d]||c,x=a.useMemo(()=>b,Object.values(b));return i.jsx(y.Provider,{value:x,children:h})};u.displayName=n+"Provider";function p(f,m){const h=m?.[e]?.[d]||c,b=a.useContext(h);if(b)return b;if(l!==void 0)return l;throw new Error(`\`${f}\` must be used within \`${n}\``)}return[u,p]}const o=()=>{const n=t.map(l=>a.createContext(l));return function(c){const d=c?.[e]||n;return a.useMemo(()=>({[`__scope${e}`]:{...c,[e]:d}}),[c,d])}};return o.scopeName=e,[s,de(o,...r)]}function de(...e){const r=e[0];if(e.length===1)return r;const t=()=>{const s=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(n){const l=s.reduce((c,{useScope:d,scopeName:u})=>{const f=d(n)[`__scope${u}`];return{...c,...f}},{});return a.useMemo(()=>({[`__scope${r.scopeName}`]:l}),[l])}};return t.scopeName=r.scopeName,t}function ue(e){const r=a.useRef({value:e,previous:e});return a.useMemo(()=>(r.current.value!==e&&(r.current.previous=r.current.value,r.current.value=e),r.current.previous),[e])}function fe(e){const r=me(e),t=a.forwardRef((s,o)=>{const{children:n,...l}=s,c=a.Children.toArray(n),d=c.find(be);if(d){const u=d.props.children,p=c.map(f=>f===d?a.Children.count(u)>1?a.Children.only(null):a.isValidElement(u)?u.props.children:null:f);return i.jsx(r,{...l,ref:o,children:a.isValidElement(u)?a.cloneElement(u,void 0,p):null})}return i.jsx(r,{...l,ref:o,children:n})});return t.displayName=`${e}.Slot`,t}function me(e){const r=a.forwardRef((t,s)=>{const{children:o,...n}=t;if(a.isValidElement(o)){const l=xe(o),c=he(n,o.props);return o.type!==a.Fragment&&(c.ref=s?te(s,l):l),a.cloneElement(o,c)}return a.Children.count(o)>1?a.Children.only(null):null});return r.displayName=`${e}.SlotClone`,r}var pe=Symbol("radix.slottable");function be(e){return a.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===pe}function he(e,r){const t={...r};for(const s in r){const o=e[s],n=r[s];/^on[A-Z]/.test(s)?o&&n?t[s]=(...c)=>{const d=n(...c);return o(...c),d}:o&&(t[s]=o):s==="style"?t[s]={...o,...n}:s==="className"&&(t[s]=[o,n].filter(Boolean).join(" "))}return{...e,...t}}function xe(e){let r=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,t=r&&"isReactWarning"in r&&r.isReactWarning;return t?e.ref:(r=Object.getOwnPropertyDescriptor(e,"ref")?.get,t=r&&"isReactWarning"in r&&r.isReactWarning,t?e.props.ref:e.props.ref||e.ref)}var ve=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],R=ve.reduce((e,r)=>{const t=fe(`Primitive.${r}`),s=a.forwardRef((o,n)=>{const{asChild:l,...c}=o,d=l?t:r;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(d,{...c,ref:n})});return s.displayName=`Primitive.${r}`,{...e,[r]:s}},{}),j="Checkbox",[ye]=le(j),[ge,_]=ye(j);function Ce(e){const{__scopeCheckbox:r,checked:t,children:s,defaultChecked:o,disabled:n,form:l,name:c,onCheckedChange:d,required:u,value:p="on",internal_do_not_use_render:f}=e,[m,h]=ne({prop:t,defaultProp:o??!1,onChange:d,caller:j}),[b,y]=a.useState(null),[x,v]=a.useState(null),g=a.useRef(!1),N=b?!!l||!!b.closest("form"):!0,E={checked:m,disabled:n,setChecked:h,control:b,setControl:y,name:c,form:l,value:p,hasConsumerStoppedPropagationRef:g,required:u,defaultChecked:C(o)?!1:o,isFormControl:N,bubbleInput:x,setBubbleInput:v};return i.jsx(ge,{scope:r,...E,children:ke(f)?f(E):s})}var $="CheckboxTrigger",T=a.forwardRef(({__scopeCheckbox:e,onKeyDown:r,onClick:t,...s},o)=>{const{control:n,value:l,disabled:c,checked:d,required:u,setControl:p,setChecked:f,hasConsumerStoppedPropagationRef:m,isFormControl:h,bubbleInput:b}=_($,e),y=B(o,p),x=a.useRef(d);return a.useEffect(()=>{const v=n?.form;if(v){const g=()=>f(x.current);return v.addEventListener("reset",g),()=>v.removeEventListener("reset",g)}},[n,f]),i.jsx(R.button,{type:"button",role:"checkbox","aria-checked":C(d)?"mixed":d,"aria-required":u,"data-state":H(d),"data-disabled":c?"":void 0,disabled:c,value:l,...s,ref:y,onKeyDown:O(r,v=>{v.key==="Enter"&&v.preventDefault()}),onClick:O(t,v=>{f(g=>C(g)?!0:!g),b&&h&&(m.current=v.isPropagationStopped(),m.current||v.stopPropagation())})})});T.displayName=$;var I=a.forwardRef((e,r)=>{const{__scopeCheckbox:t,name:s,checked:o,defaultChecked:n,required:l,disabled:c,value:d,onCheckedChange:u,form:p,...f}=e;return i.jsx(Ce,{__scopeCheckbox:t,checked:o,defaultChecked:n,disabled:c,required:l,onCheckedChange:u,name:s,form:p,value:d,internal_do_not_use_render:({isFormControl:m})=>i.jsxs(i.Fragment,{children:[i.jsx(T,{...f,ref:r,__scopeCheckbox:t}),m&&i.jsx(W,{__scopeCheckbox:t})]})})});I.displayName=j;var F="CheckboxIndicator",q=a.forwardRef((e,r)=>{const{__scopeCheckbox:t,forceMount:s,...o}=e,n=_(F,t);return i.jsx(re,{present:s||C(n.checked)||n.checked===!0,children:i.jsx(R.span,{"data-state":H(n.checked),"data-disabled":n.disabled?"":void 0,...o,ref:r,style:{pointerEvents:"none",...e.style}})})});q.displayName=F;var z="CheckboxBubbleInput",W=a.forwardRef(({__scopeCheckbox:e,...r},t)=>{const{control:s,hasConsumerStoppedPropagationRef:o,checked:n,defaultChecked:l,required:c,disabled:d,name:u,value:p,form:f,bubbleInput:m,setBubbleInput:h}=_(z,e),b=B(t,h),y=ue(n),x=oe(s);a.useEffect(()=>{const g=m;if(!g)return;const N=window.HTMLInputElement.prototype,M=Object.getOwnPropertyDescriptor(N,"checked").set,Z=!o.current;if(y!==n&&M){const J=new Event("click",{bubbles:Z});g.indeterminate=C(n),M.call(g,C(n)?!1:n),g.dispatchEvent(J)}},[m,y,n,o]);const v=a.useRef(C(n)?!1:n);return i.jsx(R.input,{type:"checkbox","aria-hidden":!0,defaultChecked:l??v.current,required:c,disabled:d,name:u,value:p,form:f,...r,tabIndex:-1,ref:b,style:{...r.style,...x,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});W.displayName=z;function ke(e){return typeof e=="function"}function C(e){return e==="indeterminate"}function H(e){return C(e)?"indeterminate":e?"checked":"unchecked"}const K=a.forwardRef(({className:e,...r},t)=>i.jsx(I,{ref:t,className:k("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...r,children:i.jsx(q,{className:k("flex items-center justify-center text-current"),children:i.jsx(se,{className:"h-4 w-4"})})}));K.displayName=I.displayName;var we="Label",U=a.forwardRef((e,r)=>i.jsx(Y.label,{...e,ref:r,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));U.displayName=we;var G=U;const je=L("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),X=a.forwardRef(({className:e,...r},t)=>i.jsx(G,{ref:t,className:k(je(),e),...r}));X.displayName=G.displayName;function Ae(){const[e,r]=a.useState(!1),[t,s]=a.useState(!1),[o,n]=a.useState(""),l=async c=>{c.preventDefault(),s(!0),n("");const d=new FormData(c.currentTarget),u=d.get("email"),p=d.get("password");try{const{data:f,error:m}=await S.auth.signInWithPassword({email:u,password:p});if(m)throw m;const{data:h}=await S.from("profiles").select("role").eq("id",f.user.id).single(),b=h?.role||"Basic";if(!["CountryManager","Administrator"].includes(b))throw await S.auth.signOut(),new Error("No tienes permisos de administrador");await new Promise(x=>setTimeout(x,500)),window.location.href="/admin"}catch(f){n(f.message||"Error al iniciar sesión"),s(!1)}};return i.jsxs("form",{className:"space-y-4",onSubmit:l,children:[i.jsx("div",{children:i.jsx(w,{type:"text",name:"name",placeholder:"Escribe tu nombre (opcional)",disabled:t})}),i.jsx("div",{children:i.jsx(w,{type:"email",name:"email",placeholder:"tu@email.com",required:!0,disabled:t})}),i.jsxs("div",{className:"relative",children:[i.jsx(w,{id:"password",name:"password",type:e?"text":"password",placeholder:"••••••••••••••••",className:"pr-9",required:!0,disabled:t}),i.jsxs(P,{type:"button",variant:"ghost",size:"icon",onClick:()=>r(c=>!c),className:"text-muted-foreground focus-visible:ring-ring/50 absolute inset-y-0 right-0 rounded-l-none hover:bg-transparent",disabled:t,children:[e?i.jsx(ae,{}):i.jsx(ie,{}),i.jsx("span",{className:"sr-only",children:e?"Ocultar contraseña":"Mostrar contraseña"})]})]}),i.jsxs("div",{className:"flex items-center justify-between gap-y-2",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(K,{id:"rememberMe",className:"size-6"}),i.jsx(X,{htmlFor:"rememberMe",className:"text-muted-foreground",children:"Recuérdame"})]}),i.jsx("a",{href:"#",className:"hover:underline text-sm text-muted-foreground",children:"¿Olvidaste tu contraseña?"})]}),o&&i.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:o}),i.jsx(P,{className:"w-full bg-[#00c44b] hover:bg-[#00a33f] text-white",type:"submit",disabled:t,children:t?"Iniciando sesión...":"Iniciar Sesión en ZVENIA Admin"})]})}export{Ae as default};
