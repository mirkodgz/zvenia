import{j as e}from"./jsx-runtime.BBGWwODT.js";import{r as i,a as J}from"./index.DYwCuWnG.js";import{u as Q,D as X,a as ee,b as te,c as re,e as _,f as ae,d as w}from"./dropdown-menu.B2cUXs5G.js";import{f as N,a as A}from"./index.Cs85si0U.js";import{P as L}from"./index.D38prCEz.js";import{c as b}from"./createLucideIcon.t37AtwoZ.js";import{G as se}from"./globe.BwzgleDB.js";import"./tslib.es6.eMSY344_.js";import"./clsx.B-dksMZM.js";import"./index.DSCYIl9i.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=b("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=b("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=b("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=b("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=b("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=b("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);function de(t,r=[]){let a=[];function d(s,o){const n=i.createContext(o);n.displayName=s+"Context";const c=a.length;a=[...a,o];const x=l=>{const{scope:m,children:p,...f}=l,h=m?.[t]?.[c]||n,v=i.useMemo(()=>f,Object.values(f));return e.jsx(h.Provider,{value:v,children:p})};x.displayName=s+"Provider";function g(l,m){const p=m?.[t]?.[c]||n,f=i.useContext(p);if(f)return f;if(o!==void 0)return o;throw new Error(`\`${l}\` must be used within \`${s}\``)}return[x,g]}const u=()=>{const s=a.map(o=>i.createContext(o));return function(n){const c=n?.[t]||s;return i.useMemo(()=>({[`__scope${t}`]:{...n,[t]:c}}),[n,c])}};return u.scopeName=t,[d,ue(u,...r)]}function ue(...t){const r=t[0];if(t.length===1)return r;const a=()=>{const d=t.map(u=>({useScope:u(),scopeName:u.scopeName}));return function(s){const o=d.reduce((n,{useScope:c,scopeName:x})=>{const l=c(s)[`__scope${x}`];return{...n,...l}},{});return i.useMemo(()=>({[`__scope${r.scopeName}`]:o}),[o])}};return a.scopeName=r.scopeName,a}var j={exports:{}},S={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D;function me(){if(D)return S;D=1;var t=J();function r(l,m){return l===m&&(l!==0||1/l===1/m)||l!==l&&m!==m}var a=typeof Object.is=="function"?Object.is:r,d=t.useState,u=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function n(l,m){var p=m(),f=d({inst:{value:p,getSnapshot:m}}),h=f[0].inst,v=f[1];return s(function(){h.value=p,h.getSnapshot=m,c(h)&&v({inst:h})},[l,p,m]),u(function(){return c(h)&&v({inst:h}),l(function(){c(h)&&v({inst:h})})},[l]),o(p),p}function c(l){var m=l.getSnapshot;l=l.value;try{var p=m();return!a(l,p)}catch{return!0}}function x(l,m){return m()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?x:n;return S.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:g,S}var z;function pe(){return z||(z=1,j.exports=me()),j.exports}var xe=pe();function fe(){return xe.useSyncExternalStore(he,()=>!0,()=>!1)}function he(){return()=>{}}var M="Avatar",[ge]=de(M),[ve,$]=ge(M),H=i.forwardRef((t,r)=>{const{__scopeAvatar:a,...d}=t,[u,s]=i.useState("idle");return e.jsx(ve,{scope:a,imageLoadingStatus:u,onImageLoadingStatusChange:s,children:e.jsx(L.span,{...d,ref:r})})});H.displayName=M;var O="AvatarImage",P=i.forwardRef((t,r)=>{const{__scopeAvatar:a,src:d,onLoadingStatusChange:u=()=>{},...s}=t,o=$(O,a),n=ye(d,s),c=Q(x=>{u(x),o.onImageLoadingStatusChange(x)});return N(()=>{n!=="idle"&&c(n)},[n,c]),n==="loaded"?e.jsx(L.img,{...s,ref:r,src:d}):null});P.displayName=O;var T="AvatarFallback",V=i.forwardRef((t,r)=>{const{__scopeAvatar:a,delayMs:d,...u}=t,s=$(T,a),[o,n]=i.useState(d===void 0);return i.useEffect(()=>{if(d!==void 0){const c=window.setTimeout(()=>n(!0),d);return()=>window.clearTimeout(c)}},[d]),o&&s.imageLoadingStatus!=="loaded"?e.jsx(L.span,{...u,ref:r}):null});V.displayName=T;function I(t,r){return t?r?(t.src!==r&&(t.src=r),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function ye(t,{referrerPolicy:r,crossOrigin:a}){const d=fe(),u=i.useRef(null),s=d?(u.current||(u.current=new window.Image),u.current):null,[o,n]=i.useState(()=>I(s,t));return N(()=>{n(I(s,t))},[s,t]),N(()=>{const c=l=>()=>{n(l)};if(!s)return;const x=c("loaded"),g=c("error");return s.addEventListener("load",x),s.addEventListener("error",g),r&&(s.referrerPolicy=r),typeof a=="string"&&(s.crossOrigin=a),()=>{s.removeEventListener("load",x),s.removeEventListener("error",g)}},[s,a,r]),o}var q=H,F=P,G=V;const k=i.forwardRef(({className:t,...r},a)=>e.jsx(q,{ref:a,className:A("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...r}));k.displayName=q.displayName;const C=i.forwardRef(({className:t,...r},a)=>e.jsx(F,{ref:a,className:A("aspect-square h-full w-full",t),...r}));C.displayName=F.displayName;const E=i.forwardRef(({className:t,...r},a)=>e.jsx(G,{ref:a,className:A("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...r}));E.displayName=G.displayName;function Re({user:t,profile:r}){const[a,d]=i.useState(!1),[u,s]=i.useState(!1),o=i.useRef(null);i.useEffect(()=>{const y=()=>{s(window.innerWidth<1024)};return y(),window.addEventListener("resize",y),()=>window.removeEventListener("resize",y)},[]),i.useEffect(()=>{if(a){const y=document.body.style.overflow;return document.body.style.overflow="auto",()=>{document.body.style.overflow=y}}},[a]),i.useEffect(()=>()=>{o.current&&clearTimeout(o.current)},[]);const n=t.first_name||"",c=t.last_name||"",x=t.full_name||`${n} ${c}`.trim()||t.email?.split("@")[0]||"User",g=n&&c?`${n} ${c}`:x,l=t.email||"",m=t.avatar_url,p=(r?.role||(t.role&&t.role!=="authenticated"?t.role:null)||"Basic").trim(),f=r?.profile_slug||t.profile_slug,h=f?`/profile/${f}`:"/profile";i.useEffect(()=>{console.log("[HeaderUserDropdown] User object:",t),console.log("[HeaderUserDropdown] Profile object:",r),console.log("[HeaderUserDropdown] User role:",t.role),console.log("[HeaderUserDropdown] Profile role:",r?.role),console.log("[HeaderUserDropdown] Final userRole:",p),console.log("[HeaderUserDropdown] isAdministrator:",p==="Administrator"),console.log("[HeaderUserDropdown] Role comparison:",{userRole:p,isExactMatch:p==="Administrator",includesAdmin:p.toLowerCase().includes("admin")})},[p,t.role,r?.role]);const v=(n?.charAt(0)||"")+(c?.charAt(0)||"")||x?.charAt(0).toUpperCase()||l?.charAt(0).toUpperCase()||"U",B=(y=>{switch(y){case"Administrator":return"bg-yellow-500/20 text-yellow-500";case"CountryManager":return"bg-blue-500/20 text-blue-500";case"Expert":return"bg-green-500/20 text-green-500";case"Ads":return"bg-purple-500/20 text-purple-500";case"Events":return"bg-orange-500/20 text-orange-500";default:return"bg-gray-500/20 text-gray-500"}})(p),K=p==="Administrator"||p.toLowerCase()==="administrator",W=async()=>{window.location.href="/api/auth/signout"},Z=()=>{o.current&&(clearTimeout(o.current),o.current=null),u||d(!0)},R=()=>{u||(o.current=setTimeout(()=>{d(!1)},150))},Y=()=>{d(!a)};return e.jsx("div",{className:"relative",onMouseEnter:Z,onMouseLeave:R,children:e.jsxs(X,{open:a,onOpenChange:d,modal:!1,children:[e.jsx(ee,{asChild:!0,children:e.jsxs("button",{type:"button",onClick:Y,className:"flex items-center gap-x-2 text-sm font-semibold leading-6 text-white hover:text-primary-400 transition-colors focus:outline-none",children:[e.jsx("span",{className:"sr-only",children:"Open user menu"}),e.jsxs(k,{className:"h-8 w-8 cursor-pointer",style:{backgroundColor:"#00c44b"},children:[m?e.jsx(C,{src:m,alt:g}):null,e.jsx(E,{className:"text-white font-bold",style:{backgroundColor:"#00c44b"},children:v})]}),e.jsx("span",{className:"hidden xl:block",children:n||l?.split("@")[0]}),e.jsx("svg",{className:"h-5 w-5 flex-none text-gray-400 group-hover:text-primary-400",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z",clipRule:"evenodd"})})]})}),e.jsxs(te,{className:"w-80 bg-white border border-gray-200 shadow-lg",align:"end",sideOffset:8,onMouseEnter:()=>{o.current&&(clearTimeout(o.current),o.current=null),u||d(!0)},onMouseLeave:R,children:[e.jsxs(re,{className:"flex items-center gap-4 px-4 py-3 font-normal border-b border-gray-200",children:[e.jsxs("div",{className:"relative",children:[e.jsxs(k,{className:"size-10",style:{backgroundColor:"#00c44b"},children:[m?e.jsx(C,{src:m,alt:g}):null,e.jsx(E,{className:"text-white font-bold",style:{backgroundColor:"#00c44b"},children:v})]}),e.jsx("span",{className:"absolute right-0 bottom-0 block size-2.5 rounded-full bg-green-600 ring-2 ring-white"})]}),e.jsxs("div",{className:"flex flex-1 flex-col items-start",children:[e.jsx("span",{className:"text-dark text-base font-semibold",children:g}),e.jsx("span",{className:"text-gray-500 text-sm",children:l})]})]}),e.jsx("div",{className:`px-4 py-2 border-b border-gray-200 ${B}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-bold uppercase tracking-wide",children:p})]})}),e.jsx(_,{className:"bg-gray-200"}),e.jsxs(ae,{children:[K&&e.jsxs(w,{className:"px-4 py-2.5 text-base cursor-pointer",onClick:()=>window.location.href="/admin",children:[e.jsx(oe,{className:"text-yellow-500 size-5 mr-3"}),e.jsx("span",{className:"text-yellow-500 font-bold",children:"Admin"})]}),e.jsxs(w,{className:"px-4 py-2.5 text-base cursor-pointer",onClick:()=>window.location.href="/z-network",children:[e.jsx(se,{className:"text-dark size-5 mr-3"}),e.jsx("span",{className:"text-dark font-semibold",children:"Z-NETWORK"})]}),e.jsxs(w,{className:"px-4 py-2.5 text-base cursor-pointer",onClick:()=>window.location.href="/z-talks",children:[e.jsx(le,{className:"text-dark size-5 mr-3"}),e.jsx("span",{className:"text-dark font-semibold",children:"Z-TALKS"})]}),e.jsxs(w,{className:"px-4 py-2.5 text-base cursor-pointer",onClick:()=>window.location.href="/dashboard/profile",children:[e.jsx(U,{className:"text-dark size-5 mr-3"}),e.jsx("span",{className:"text-dark font-semibold",children:"User Area"})]}),e.jsxs(w,{className:"px-4 py-2.5 text-base cursor-pointer",onClick:()=>window.location.href=h,children:[e.jsx(U,{className:"text-dark size-5 mr-3"}),e.jsx("span",{className:"text-dark",children:"Your Profile"})]}),e.jsxs(w,{className:"px-4 py-2.5 text-base cursor-pointer",onClick:()=>window.location.href="/dashboard/profile/edit",children:[e.jsx(ce,{className:"text-dark size-5 mr-3"}),e.jsx("span",{className:"text-dark",children:"Settings"})]})]}),e.jsx(_,{className:"bg-gray-200"}),e.jsxs(w,{variant:"destructive",className:"px-4 py-2.5 text-base cursor-pointer",onClick:W,children:[e.jsx(ne,{className:"size-5 mr-3"}),e.jsx("span",{children:"Sign Out"})]})]})]})})}export{Re as default};
