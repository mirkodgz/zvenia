import{s as c}from"./supabase.D-JsBXyn.js";import"./index.BWsCvz9k.js";import"./tslib.es6.eMSY344_.js";const s=document.getElementById("login-form"),n=document.getElementById("error-message"),a=document.getElementById("error-text");s&&s.addEventListener("submit",async e=>{e.preventDefault(),n.classList.add("hidden");const d=new FormData(s),i=await fetch("/api/auth/signin",{method:"POST",body:d});if(i.ok)window.location.href="/";else{const t=await i.json(),o=t.error||"Invalid login credentials";if(a.textContent=o,n.classList.remove("hidden"),t.code==="migration_required"||o.includes("migrated to a new platform"))n.className="bg-blue-50 border border-blue-200 text-blue-800 px-4 py-3 rounded-lg text-sm",a.innerHTML=`
            <strong>We've migrated to a new platform!</strong><br/>
            Your password needs to be reset. ${t.emailSent?"We've sent you an email with instructions.":'Please use "Forgot Password?" below to reset it.'}
          `;else if(o.includes("migrated from WordPress")||o.includes("Invalid login credentials")){const r=document.createElement("p");r.className="mt-2 text-xs",r.innerHTML='If you were migrated from WordPress, please <a href="/forgot-password" class="text-[#00c44b] underline font-semibold">reset your password</a> to access the new platform.',a.appendChild(r)}}});const l=document.getElementById("google-login");l&&l.addEventListener("click",async()=>{const{error:e}=await c.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/api/auth/callback`}});e&&(console.error("Google login error:",e.message),alert("Error logging in with Google: "+e.message))});
